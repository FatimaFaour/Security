*filter
:INPUT ACCEPT [0:0]
:FORWARD DROP [0:0]
:OUTPUT ACCEPT [0:0]

-A FORWARD -s 172.30.0.0/24 -d 172.31.0.10/32 -p tcp --dport 80 -m conntrack --ctstate NEW -j ACCEPT

-A FORWARD -j LOG --log-prefix "FW_DROP " --log-level 4
-A FORWARD -j DROP

COMMIT

*mangle
:PREROUTING ACCEPT [0:0]
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:POSTROUTING ACCEPT [0:0]

-A PREROUTING -s 172.30.0.0/24 -d 172.31.0.10/32 -p tcp --dport 80 -j TEE --gateway 172.31.0.20
-A PREROUTING -s 172.31.0.10/32 -d 172.30.0.0/24 -p tcp --sport 80 -j TEE --gateway 172.31.0.20

COMMIT